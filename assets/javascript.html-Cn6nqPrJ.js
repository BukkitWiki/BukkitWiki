import{_ as a,c as s,e,o as t}from"./app-D7gCiA2X.js";const l={};function n(r,i){return t(),s("div",null,i[0]||(i[0]=[e(`<h1 id="javascript" tabindex="-1"><a class="header-anchor" href="#javascript"><span>JavaScript</span></a></h1><h2 id="对象" tabindex="-1"><a class="header-anchor" href="#对象"><span>对象</span></a></h2><p>TrMenu 的 JavaScript 引擎目前提供以下对象</p><ul><li><code>bukkitServer</code> 即 Bukkit.getServer()</li><li><code>utils</code> 即 me.arasple.mc.trmenu.module.internal.script.js.Assist.INSTANCE</li><li><code>player</code> 即 玩家本身</li><li><code>session</code> 即 me.arasple.mc.trmenu.module.display.MenuSession</li></ul><h3 id="插件挂钩" tabindex="-1"><a class="header-anchor" href="#插件挂钩"><span>插件挂钩</span></a></h3><p>可以在 JavaScript 中调用挂钩的插件,比如我想调用 EcoItems 的 API 来获得物品,可以通过<code>ecoitems.getItem(&quot;my_item&quot;)</code>来获得</p><p>聪明的你应该已经发现了,绑定到 JavaScript 命名空间的名称是插件名字的全小写</p><p>目前支持挂钩的</p><ul><li>EcoItems</li><li>Floodgate</li><li>HeadDatabase</li><li>HMCCosmetics</li><li>ItemsAdder</li><li>MagicCosmetics (注意:这个插件的 JS 命名空间是 magicAPI)</li><li>MagicGem</li><li>MMOItems</li><li>NBTAPI</li><li>NeigeItems</li><li>Oraxen</li><li>PlayerPoints</li><li>SkinsRestorer</li><li>Skulls</li><li>SXItem</li><li>Triton</li><li>Vault</li><li>Zaphkiel</li><li>MythicMobs</li></ul><p>如果你并不想要，可以关闭<code>Export-Hook-Plugin</code></p><h3 id="java-命名空间" tabindex="-1"><a class="header-anchor" href="#java-命名空间"><span>Java 命名空间</span></a></h3><h4 id="别名" tabindex="-1"><a class="header-anchor" href="#别名"><span>别名</span></a></h4><p>在<code>settings.yml</code>中的<code>Bindings.Binding-Map</code>可以将类以别名导出到 JS 命名空间</p><p>比如</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Bindings</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  Binding-Map</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;Bukkit&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;org.bukkit.Bukkit&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &quot;EntityType&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;org.bukkit.entity.EntityType&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="奇技淫巧" tabindex="-1"><a class="header-anchor" href="#奇技淫巧"><span>奇技淫巧</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">lang</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;System&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">].</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;TrMenu 真 NB&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="java-type" tabindex="-1"><a class="header-anchor" href="#java-type"><span>Java.type</span></a></h3><p>创建别名</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> System</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> Java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;java.lang.System&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;TrMenu 真 NB&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h2><p>TrMenu 的 JavaScript 引擎目前提供以下函数</p><ul><li><code>vars(String input)</code> 返回替换函数变量</li><li><code>varInt(String input)</code> 替换变量并转换为整型</li></ul><h2 id="注意" tabindex="-1"><a class="header-anchor" href="#注意"><span>注意</span></a></h2><ul><li>TrMenu 的 JavaScript 均会预编译缓存，一切变量使用都需要通过函数处理</li><li>表示 “或” 的符号为 <code>||</code> , 表示 “与” 的符号为 <code>&amp;&amp;</code></li></ul><h2 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h2><ul><li>判断有无权限 <ul><li>可直接调用 player 对象的方法，<code>player.hasPermission(&quot;perm&quot;)</code></li></ul></li></ul><h2 id="utils" tabindex="-1"><a class="header-anchor" href="#utils"><span>utils</span></a></h2><p><a href="https://github.com/TrPlugins/TrMenu/blob/stable/v3/plugin/src/main/kotlin/trplugins/menu/module/internal/script/js/Assist.kt" target="_blank" rel="noopener noreferrer">TrMenu/Assist.kt</a></p><h2 id="trmenu-graaljs" tabindex="-1"><a class="header-anchor" href="#trmenu-graaljs"><span>TrMenu GraalJS</span></a></h2><p><strong>该功能仍处于实验性</strong></p><p>让 TrMenu 使用 GraalJS,根据性能测试,GraalJS 的执行性能在 Nashorn 的两倍以上,并且支持最新的JS语法</p><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><p>GraalJS 需要在 GraalVM 上才可以完全发挥性能,其他 JDK 也能用</p><p><a href="https://github.com/lilingfengdev/TrMenu-Graal/releases/download/latest/TrMenu-Graal-all.jar" target="_blank" rel="noopener noreferrer">下载 TrMenu GraalJS</a>,作为插件进行安装</p><h3 id="语法扩展" tabindex="-1"><a class="header-anchor" href="#语法扩展"><span>语法扩展</span></a></h3><h4 id="包加载" tabindex="-1"><a class="header-anchor" href="#包加载"><span>包加载</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">addToClasspath</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">location</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>将指定位置.jar（文件或目录路径字符串）添加到 Java 的类路径中</p><h4 id="js执行" tabindex="-1"><a class="header-anchor" href="#js执行"><span>JS执行</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">load</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">source</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>加载（解析并执行）指定的 JavaScript 源代码</p><h4 id="包访问" tabindex="-1"><a class="header-anchor" href="#包访问"><span>包访问</span></a></h4><p>GraalVM JavaScript 提供了一个全局属性：<code>Packages</code></p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Packages</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">java</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">lang</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">System</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;TrMenu 真 NB&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="todo" tabindex="-1"><a class="header-anchor" href="#todo"><span>TODO</span></a></h4><p>不想写了(:,还有()</p>`,47)]))}const p=a(l,[["render",n],["__file","javascript.html.vue"]]),d=JSON.parse('{"path":"/plugins/plugins/trmenu/script/javascript.html","title":"JavaScript","lang":"zh-CN","frontmatter":{"description":"本节需要有一定的 Java / JavaScript 或类似编程基础方便理解","head":[["meta",{"property":"og:url","content":"https://bukkit.wiki/plugins/plugins/trmenu/script/javascript.html"}],["meta",{"property":"og:site_name","content":"BukkitWiki"}],["meta",{"property":"og:title","content":"JavaScript"}],["meta",{"property":"og:description","content":"本节需要有一定的 Java / JavaScript 或类似编程基础方便理解"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-10-29T08:09:08.000Z"}],["meta",{"property":"article:modified_time","content":"2024-10-29T08:09:08.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JavaScript\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-10-29T08:09:08.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"对象","slug":"对象","link":"#对象","children":[{"level":3,"title":"插件挂钩","slug":"插件挂钩","link":"#插件挂钩","children":[]},{"level":3,"title":"Java 命名空间","slug":"java-命名空间","link":"#java-命名空间","children":[]},{"level":3,"title":"Java.type","slug":"java-type","link":"#java-type","children":[]}]},{"level":2,"title":"函数","slug":"函数","link":"#函数","children":[]},{"level":2,"title":"注意","slug":"注意","link":"#注意","children":[]},{"level":2,"title":"实例","slug":"实例","link":"#实例","children":[]},{"level":2,"title":"utils","slug":"utils","link":"#utils","children":[]},{"level":2,"title":"TrMenu GraalJS","slug":"trmenu-graaljs","link":"#trmenu-graaljs","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"语法扩展","slug":"语法扩展","link":"#语法扩展","children":[]}]}],"git":{"createdTime":1730189348000,"updatedTime":1730189348000,"contributors":[{"name":"大阔","email":"1520622465@qq.com","commits":1}]},"readingTime":{"minutes":1.71,"words":513},"filePathRelative":"plugins/plugins/trmenu/script/javascript.md","localizedDate":"2024年10月29日","excerpt":"\\n<h2>对象</h2>\\n<p>TrMenu 的 JavaScript 引擎目前提供以下对象</p>\\n<ul>\\n<li><code>bukkitServer</code> 即 Bukkit.getServer()</li>\\n<li><code>utils</code> 即 me.arasple.mc.trmenu.module.internal.script.js.Assist.INSTANCE</li>\\n<li><code>player</code> 即 玩家本身</li>\\n<li><code>session</code> 即 me.arasple.mc.trmenu.module.display.MenuSession</li>\\n</ul>"}');export{p as comp,d as data};
