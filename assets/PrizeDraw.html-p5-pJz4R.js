import{_ as q,f as d,p as E,c as o,a as i,i as k,w as D,k as T,q as $,s as _,t as p,F as x,r as b,o as r,x as F}from"./app-DdBNsIhi.js";const Z={class:"prize-draw"},A={class:"input-section"},K={class:"import-export-section"},W={class:"draw-count"},G=["max"],Q={class:"participant-list"},X=["onClick"],Y={class:"result-section"},tt=["disabled"],et={key:0,class:"error"},nt={key:1,class:"success"},it={key:0,class:"history-section"},st=["onClick"],at=["onClick"],ot={__name:"PrizeDraw.html",setup(rt){const R=()=>{if(typeof window<"u"){const n=localStorage.getItem("participants");return n?JSON.parse(n):[]}return[]},z=()=>{if(typeof window<"u"){const n=localStorage.getItem("results");return n?JSON.parse(n):[]}return[]},a=d(R()),m=d(""),v=d(z()),f=d(!1),c=d(""),l=d(""),y=d(1),C=E({duration:2e3,speed:50}),u=d(typeof window<"u"?JSON.parse(localStorage.getItem("drawHistory")||"[]"):[]),g=()=>{typeof window<"u"&&localStorage.setItem("participants",JSON.stringify(a.value))},N=()=>{if(typeof window<"u"){localStorage.setItem("results",JSON.stringify(v.value));const n={id:Date.now(),date:new Date().toLocaleString(),winners:[...v.value],participants:[...a.value]};u.value.unshift(n),localStorage.setItem("drawHistory",JSON.stringify(u.value)),l.value="✨ 抽奖成功!"}},H=()=>{confirm("确定要清空参与者列表吗?")&&(a.value=[],g(),l.value="✨ 清空成功!")},P=d(null),O=n=>{const t=n.target.files[0];if(t){const e=new FileReader;e.onload=s=>{const h=s.target.result.split(/[\n,，]/).filter(w=>w.trim());a.value.push(...h),g(),l.value="✨ 导入成功!"},e.readAsText(t)}},J=()=>{if(!a.value.length){c.value="❌ 参与者列表为空!";return}const n=a.value.join(`
`),t=new Blob([n],{type:"text/plain"}),e=URL.createObjectURL(t),s=document.createElement("a");s.href=e,s.download="参与者名单.txt",s.click(),URL.revokeObjectURL(e),l.value="✨ 导出成功!"},S=()=>{if(!m.value.trim()){c.value="❌ 请输入参与者姓名!";return}const n=m.value.split(/[\s,，]/).filter(t=>t.trim());n.length>0&&(a.value.push(...n),m.value="",g(),l.value="✨ 添加成功!",c.value="",document.querySelector(".input-section input").focus())},j=n=>{a.value.splice(n,1),g(),l.value="✨ 删除成功!"},L=()=>{const n=v.value.join(`
`);navigator.clipboard.writeText(n).then(()=>{const t=document.createElement("div");t.textContent="✨ 复制成功!",t.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 12px 24px;
      background: rgba(0,0,0,0.85);
      color: white;
      border-radius: 8px;
      font-size: 15px;
      z-index: 9999;
      animation: fadeIn 0.2s ease;
    `,document.body.appendChild(t),setTimeout(()=>{t.style.animation="fadeOut 0.2s ease",setTimeout(()=>t.remove(),200)},1300)}).catch(t=>{console.error("复制失败:",t),c.value="❌ 复制失败,请手动复制"})},U=n=>{const t=n.join(`
`);navigator.clipboard.writeText(t).then(()=>{const e=document.createElement("div");e.textContent="✨ 复制成功!",e.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 12px 24px;
      background: rgba(0,0,0,0.85);
      color: white;
      border-radius: 8px;
      font-size: 15px;
      z-index: 9999;
      animation: fadeIn 0.2s ease;
    `,document.body.appendChild(e),setTimeout(()=>{e.style.animation="fadeOut 0.2s ease",setTimeout(()=>e.remove(),200)},1300)}).catch(e=>{console.error("复制失败:",e),c.value="❌ 复制失败,请手动复制"})},B=n=>{confirm("确定要删除这条记录吗?")&&(u.value=u.value.filter(t=>t.id!==n),typeof window<"u"&&localStorage.setItem("drawHistory",JSON.stringify(u.value)),l.value="✨ 删除成功!")},M=()=>{confirm("确定要清空所有历史记录吗?")&&(u.value=[],typeof window<"u"&&localStorage.setItem("drawHistory",JSON.stringify(u.value)),l.value="✨ 清空成功!")},V=()=>{if(a.value.length===0){c.value="❌ 请先添加参与者!";return}if(y.value>a.value.length){c.value="❌ 抽取数量不能大于参与者数量!";return}c.value="",l.value="",f.value=!0,v.value=[];let n=0;const t=setInterval(()=>{const e=[],s=[...a.value];for(let w=0;w<y.value;w++)if(s.length>0){const I=Math.floor(Math.random()*s.length);e.push(s[I]),s.splice(I,1)}v.value=e,n++;const h=n/20;C.speed*(1+h*2),n>20&&(clearInterval(t),f.value=!1,N())},C.speed)};return(n,t)=>(r(),o("div",null,[i("div",Z,[i("div",A,[D(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),onKeyup:$(S,["enter"]),placeholder:"输入参与者姓名(可用空格、逗号分隔添加多个)"},null,544),[[T,m.value]]),i("button",{onClick:S},"添加")]),i("div",K,[i("input",{type:"file",ref_key:"fileInputRef",ref:P,class:"file-input",onChange:O,accept:".txt"},null,544),i("button",{onClick:t[1]||(t[1]=e=>P.value.click())},"导入名单"),i("button",{onClick:J},"导出名单")]),i("div",W,[t[3]||(t[3]=i("span",null,"抽取数量:",-1)),D(i("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>y.value=e),min:"1",max:a.value.length},null,8,G),[[T,y.value]])]),i("div",Q,[i("h3",null,[_("参与者列表 ("+p(a.value.length)+"人): ",1),i("button",{class:"clear-btn",onClick:H,style:{"margin-left":"10px"}},"清空列表")]),(r(!0),o(x,null,b(a.value,(e,s)=>(r(),o("div",{key:s,class:"participant-item"},[_(p(e)+" ",1),i("span",{class:"remove-btn",onClick:h=>j(s)},"×",8,X)]))),128))]),i("div",Y,[i("button",{onClick:V,disabled:f.value},p(f.value?"抽奖中...":"开始抽奖"),9,tt),c.value?(r(),o("div",et,p(c.value),1)):k("v-if",!0),l.value?(r(),o("div",nt,p(l.value),1)):k("v-if",!0),v.value.length?(r(),o("div",{key:2,class:"results",onClick:L},[(r(!0),o(x,null,b(v.value,(e,s)=>(r(),o("div",{key:s,class:"result-item"},p(e),1))),128))])):k("v-if",!0)]),u.value.length?(r(),o("div",it,[i("h3",null,[t[4]||(t[4]=_("历史记录 ")),i("button",{class:"clear-btn",onClick:M,style:{"margin-left":"10px"}},"清空历史")]),(r(!0),o(x,null,b(u.value,e=>(r(),o("div",{key:e.id,class:"history-item",onClick:s=>U(e.winners)},[i("span",{class:"remove-btn",onClick:F(s=>B(e.id),["stop"])},"×",8,at),i("p",null,p(e.date),1),(r(!0),o(x,null,b(e.winners,s=>(r(),o("div",{class:"participant-item",key:s},p(s),1))),128))],8,st))),128))])):k("v-if",!0)])]))}},ct=q(ot,[["__scopeId","data-v-a7806934"]]),ut=JSON.parse(`{"path":"/tools/PrizeDraw.html","title":"抽奖工具","lang":"zh-CN","frontmatter":{"title":"抽奖工具","icon":"carbon:trophy","order":6,"description":"添加 导入名单 导出名单 抽取数量: 参与者列表 ({{ participants.length }}人): 清空列表 {{ participant }} × {{ isDrawing ? '抽奖中...' : '开始抽奖' }} {{ error }} {{ success }} {{ result }} 历史记录 清空历史 × {{ record....","head":[["meta",{"property":"og:url","content":"https://bukkit.wiki/tools/PrizeDraw.html"}],["meta",{"property":"og:site_name","content":"BukkitWiki"}],["meta",{"property":"og:title","content":"抽奖工具"}],["meta",{"property":"og:description","content":"添加 导入名单 导出名单 抽取数量: 参与者列表 ({{ participants.length }}人): 清空列表 {{ participant }} × {{ isDrawing ? '抽奖中...' : '开始抽奖' }} {{ error }} {{ success }} {{ result }} 历史记录 清空历史 × {{ record...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-13T12:03:11.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-13T12:03:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"抽奖工具\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-13T12:03:11.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1736214661000,"updatedTime":1739448191000,"contributors":[{"name":"大阔","email":"1520622465@qq.com","commits":2}]},"readingTime":{"minutes":6.06,"words":1818},"filePathRelative":"tools/PrizeDraw.md","localizedDate":"2025年1月7日","excerpt":"<div class=\\"prize-draw\\">\\n  <div class=\\"input-section\\">\\n    <input v-model=\\"newParticipant\\" @keyup.enter=\\"addParticipant\\" placeholder=\\"输入参与者姓名(可用空格、逗号分隔添加多个)\\">\\n    <button @click=\\"addParticipant\\">添加</button>\\n  </div>\\n  <div class=\\"import-export-section\\">\\n    <input type=\\"file\\" ref=\\"fileInputRef\\" class=\\"file-input\\" @change=\\"importParticipants\\" accept=\\".txt\\">\\n    <button @click=\\"fileInputRef.click()\\">导入名单</button>\\n    <button @click=\\"exportParticipants\\">导出名单</button>\\n  </div>\\n  <div class=\\"draw-count\\">\\n    <span>抽取数量:</span>\\n    <input type=\\"number\\" v-model=\\"drawCount\\" min=\\"1\\" :max=\\"participants.length\\">\\n  </div>\\n  <div class=\\"participant-list\\">\\n    <h3>参与者列表 ({{ participants.length }}人): \\n      <button class=\\"clear-btn\\" @click=\\"clearParticipants\\" style=\\"margin-left: 10px;\\">清空列表</button>\\n    </h3>\\n    <div v-for=\\"(participant, index) in participants\\" :key=\\"index\\" class=\\"participant-item\\">\\n      {{ participant }}\\n      <span class=\\"remove-btn\\" @click=\\"removeParticipant(index)\\">×</span>\\n    </div>\\n  </div>\\n  <div class=\\"result-section\\">\\n    <button @click=\\"startDraw\\" :disabled=\\"isDrawing\\">\\n      {{ isDrawing ? '抽奖中...' : '开始抽奖' }}\\n    </button>\\n    <div class=\\"error\\" v-if=\\"error\\">{{ error }}</div>\\n    <div class=\\"success\\" v-if=\\"success\\">{{ success }}</div>\\n    <div class=\\"results\\" v-if=\\"results.length\\" @click=\\"copyResults\\">\\n      <div v-for=\\"(result, index) in results\\" :key=\\"index\\" class=\\"result-item\\">\\n        {{ result }}\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\"history-section\\" v-if=\\"drawHistory.length\\">\\n    <h3>历史记录 \\n      <button class=\\"clear-btn\\" @click=\\"clearHistory\\" style=\\"margin-left: 10px;\\">清空历史</button>\\n    </h3>\\n    <div v-for=\\"record in drawHistory\\" :key=\\"record.id\\" class=\\"history-item\\" @click=\\"copyHistory(record.winners)\\">\\n      <span class=\\"remove-btn\\" @click.stop=\\"removeHistory(record.id)\\">×</span>\\n      <p>{{ record.date }}</p>\\n      <div class=\\"participant-item\\" v-for=\\"winner in record.winners\\" :key=\\"winner\\">\\n        {{ winner }}\\n      </div>\\n    </div>\\n  </div>\\n</div>","autoDesc":true}`);export{ct as comp,ut as data};
