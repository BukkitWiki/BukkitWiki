import{_ as L,c,a as i,i as x,k as T,l as z,q as M,u as D,t as y,F as b,r as k,f as m,x as N,g as U,o as l,y as B}from"./app-BYBR_VbE.js";const V={__name:"PrizeDraw.html",setup(O,{expose:d}){d();const _=()=>{if(typeof window<"u"){const e=localStorage.getItem("participants");return e?JSON.parse(e):[]}return[]},t=()=>{if(typeof window<"u"){const e=localStorage.getItem("results");return e?JSON.parse(e):[]}return[]},s=m(_()),g=m(""),n=m(t()),o=m(!1),p=m(""),u=m(""),P=m(1),C=N({duration:2e3,speed:50}),f=m(typeof window<"u"?JSON.parse(localStorage.getItem("drawHistory")||"[]"):[]),w=()=>{typeof window<"u"&&localStorage.setItem("participants",JSON.stringify(s.value))},H=()=>{if(typeof window<"u"){localStorage.setItem("results",JSON.stringify(n.value));const e={id:Date.now(),date:new Date().toLocaleString(),winners:[...n.value],participants:[...s.value]};f.value.unshift(e),localStorage.setItem("drawHistory",JSON.stringify(f.value)),u.value="✨ 抽奖成功!"}},J=()=>{confirm("确定要清空参与者列表吗?")&&(s.value=[],w(),u.value="✨ 清空成功!")},j=m(null),I={getStoredParticipants:_,getStoredResults:t,participants:s,newParticipant:g,results:n,isDrawing:o,error:p,success:u,drawCount:P,animationConfig:C,drawHistory:f,saveParticipants:w,saveResults:H,clearParticipants:J,fileInputRef:j,importParticipants:e=>{const a=e.target.files[0];if(a){const r=new FileReader;r.onload=v=>{const S=v.target.result.split(/[\n,，]/).filter(h=>h.trim());s.value.push(...S),w(),u.value="✨ 导入成功!"},r.readAsText(a)}},exportParticipants:()=>{if(!s.value.length){p.value="❌ 参与者列表为空!";return}const e=s.value.join(`
`),a=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(a),v=document.createElement("a");v.href=r,v.download="参与者名单.txt",v.click(),URL.revokeObjectURL(r),u.value="✨ 导出成功!"},addParticipant:()=>{if(!g.value.trim()){p.value="❌ 请输入参与者姓名!";return}const e=g.value.split(/[\s,，]/).filter(a=>a.trim());e.length>0&&(s.value.push(...e),g.value="",w(),u.value="✨ 添加成功!",p.value="",document.querySelector(".input-section input").focus())},removeParticipant:e=>{s.value.splice(e,1),w(),u.value="✨ 删除成功!"},copyResults:()=>{const e=n.value.join(`
`);navigator.clipboard.writeText(e).then(()=>{const a=document.createElement("div");a.textContent="✨ 复制成功!",a.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 12px 24px;
      background: rgba(0,0,0,0.85);
      color: white;
      border-radius: 8px;
      font-size: 15px;
      z-index: 9999;
      animation: fadeIn 0.2s ease;
    `,document.body.appendChild(a),setTimeout(()=>{a.style.animation="fadeOut 0.2s ease",setTimeout(()=>a.remove(),200)},1300)}).catch(a=>{console.error("复制失败:",a),p.value="❌ 复制失败,请手动复制"})},copyHistory:e=>{const a=e.join(`
`);navigator.clipboard.writeText(a).then(()=>{const r=document.createElement("div");r.textContent="✨ 复制成功!",r.style.cssText=`
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 12px 24px;
      background: rgba(0,0,0,0.85);
      color: white;
      border-radius: 8px;
      font-size: 15px;
      z-index: 9999;
      animation: fadeIn 0.2s ease;
    `,document.body.appendChild(r),setTimeout(()=>{r.style.animation="fadeOut 0.2s ease",setTimeout(()=>r.remove(),200)},1300)}).catch(r=>{console.error("复制失败:",r),p.value="❌ 复制失败,请手动复制"})},removeHistory:e=>{confirm("确定要删除这条记录吗?")&&(f.value=f.value.filter(a=>a.id!==e),typeof window<"u"&&localStorage.setItem("drawHistory",JSON.stringify(f.value)),u.value="✨ 删除成功!")},clearHistory:()=>{confirm("确定要清空所有历史记录吗?")&&(f.value=[],typeof window<"u"&&localStorage.setItem("drawHistory",JSON.stringify(f.value)),u.value="✨ 清空成功!")},startDraw:()=>{if(s.value.length===0){p.value="❌ 请先添加参与者!";return}if(P.value>s.value.length){p.value="❌ 抽取数量不能大于参与者数量!";return}p.value="",u.value="",o.value=!0,n.value=[];let e=0;const a=setInterval(()=>{const r=[],v=[...s.value];for(let h=0;h<P.value;h++)if(v.length>0){const R=Math.floor(Math.random()*v.length);r.push(v[R]),v.splice(R,1)}n.value=r,e++;const S=e/20;C.speed*(1+S*2),e>20&&(clearInterval(a),o.value=!1,H())},C.speed)},ref:m,reactive:N,onMounted:U};return Object.defineProperty(I,"__isScriptSetup",{enumerable:!1,value:!0}),I}},q={class:"prize-draw"},E={class:"input-section"},F={class:"import-export-section"},Z={class:"draw-count"},A=["max"],K={class:"participant-list"},W=["onClick"],G={class:"result-section"},Q=["disabled"],X={key:0,class:"error"},Y={key:1,class:"success"},$={key:0,class:"history-section"},tt=["onClick"],et=["onClick"];function nt(O,d,_,t,s,g){return l(),c("div",null,[i("div",q,[i("div",E,[T(i("input",{"onUpdate:modelValue":d[0]||(d[0]=n=>t.newParticipant=n),onKeyup:M(t.addParticipant,["enter"]),placeholder:"输入参与者姓名(可用空格、逗号分隔添加多个)"},null,544),[[z,t.newParticipant]]),i("button",{onClick:t.addParticipant},"添加")]),i("div",F,[i("input",{type:"file",ref:"fileInputRef",class:"file-input",onChange:t.importParticipants,accept:".txt"},null,544),i("button",{onClick:d[1]||(d[1]=n=>t.fileInputRef.click())},"导入名单"),i("button",{onClick:t.exportParticipants},"导出名单")]),i("div",Z,[d[3]||(d[3]=i("span",null,"抽取数量:",-1)),T(i("input",{type:"number","onUpdate:modelValue":d[2]||(d[2]=n=>t.drawCount=n),min:"1",max:t.participants.length},null,8,A),[[z,t.drawCount]])]),i("div",K,[i("h3",null,[D("参与者列表 ("+y(t.participants.length)+"人): ",1),i("button",{class:"clear-btn",onClick:t.clearParticipants,style:{"margin-left":"10px"}},"清空列表")]),(l(!0),c(b,null,k(t.participants,(n,o)=>(l(),c("div",{key:o,class:"participant-item"},[D(y(n)+" ",1),i("span",{class:"remove-btn",onClick:p=>t.removeParticipant(o)},"×",8,W)]))),128))]),i("div",G,[i("button",{onClick:t.startDraw,disabled:t.isDrawing},y(t.isDrawing?"抽奖中...":"开始抽奖"),9,Q),t.error?(l(),c("div",X,y(t.error),1)):x("v-if",!0),t.success?(l(),c("div",Y,y(t.success),1)):x("v-if",!0),t.results.length?(l(),c("div",{key:2,class:"results",onClick:t.copyResults},[(l(!0),c(b,null,k(t.results,(n,o)=>(l(),c("div",{key:o,class:"result-item"},y(n),1))),128))])):x("v-if",!0)]),t.drawHistory.length?(l(),c("div",$,[i("h3",null,[d[4]||(d[4]=D("历史记录 ")),i("button",{class:"clear-btn",onClick:t.clearHistory,style:{"margin-left":"10px"}},"清空历史")]),(l(!0),c(b,null,k(t.drawHistory,n=>(l(),c("div",{key:n.id,class:"history-item",onClick:o=>t.copyHistory(n.winners)},[i("span",{class:"remove-btn",onClick:B(o=>t.removeHistory(n.id),["stop"])},"×",8,et),i("p",null,y(n.date),1),(l(!0),c(b,null,k(n.winners,o=>(l(),c("div",{class:"participant-item",key:o},y(o),1))),128))],8,tt))),128))])):x("v-if",!0)])])}const vt=L(V,[["render",nt],["__scopeId","data-v-a7806934"],["__file","PrizeDraw.html.vue"]]),mt=JSON.parse(`{"path":"/tools/PrizeDraw.html","title":"抽奖工具","lang":"zh-CN","frontmatter":{"title":"抽奖工具","icon":"carbon:trophy","order":6,"description":"添加 导入名单 导出名单 抽取数量: 参与者列表 ({{ participants.length }}人): 清空列表 {{ participant }} × {{ isDrawing ? '抽奖中...' : '开始抽奖' }} {{ error }} {{ success }} {{ result }} 历史记录 清空历史 × {{ record....","head":[["meta",{"property":"og:url","content":"https://bukkit.wiki/tools/PrizeDraw.html"}],["meta",{"property":"og:site_name","content":"BukkitWiki"}],["meta",{"property":"og:title","content":"抽奖工具"}],["meta",{"property":"og:description","content":"添加 导入名单 导出名单 抽取数量: 参与者列表 ({{ participants.length }}人): 清空列表 {{ participant }} × {{ isDrawing ? '抽奖中...' : '开始抽奖' }} {{ error }} {{ success }} {{ result }} 历史记录 清空历史 × {{ record...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-13T12:03:11.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-13T12:03:11.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"抽奖工具\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-02-13T12:03:11.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1736214661000,"updatedTime":1739448191000,"contributors":[{"name":"大阔","email":"1520622465@qq.com","commits":2}]},"readingTime":{"minutes":6.06,"words":1818},"filePathRelative":"tools/PrizeDraw.md","localizedDate":"2025年1月7日","excerpt":"<div class=\\"prize-draw\\">\\n  <div class=\\"input-section\\">\\n    <input v-model=\\"newParticipant\\" @keyup.enter=\\"addParticipant\\" placeholder=\\"输入参与者姓名(可用空格、逗号分隔添加多个)\\">\\n    <button @click=\\"addParticipant\\">添加</button>\\n  </div>\\n  <div class=\\"import-export-section\\">\\n    <input type=\\"file\\" ref=\\"fileInputRef\\" class=\\"file-input\\" @change=\\"importParticipants\\" accept=\\".txt\\">\\n    <button @click=\\"fileInputRef.click()\\">导入名单</button>\\n    <button @click=\\"exportParticipants\\">导出名单</button>\\n  </div>\\n  <div class=\\"draw-count\\">\\n    <span>抽取数量:</span>\\n    <input type=\\"number\\" v-model=\\"drawCount\\" min=\\"1\\" :max=\\"participants.length\\">\\n  </div>\\n  <div class=\\"participant-list\\">\\n    <h3>参与者列表 ({{ participants.length }}人): \\n      <button class=\\"clear-btn\\" @click=\\"clearParticipants\\" style=\\"margin-left: 10px;\\">清空列表</button>\\n    </h3>\\n    <div v-for=\\"(participant, index) in participants\\" :key=\\"index\\" class=\\"participant-item\\">\\n      {{ participant }}\\n      <span class=\\"remove-btn\\" @click=\\"removeParticipant(index)\\">×</span>\\n    </div>\\n  </div>\\n  <div class=\\"result-section\\">\\n    <button @click=\\"startDraw\\" :disabled=\\"isDrawing\\">\\n      {{ isDrawing ? '抽奖中...' : '开始抽奖' }}\\n    </button>\\n    <div class=\\"error\\" v-if=\\"error\\">{{ error }}</div>\\n    <div class=\\"success\\" v-if=\\"success\\">{{ success }}</div>\\n    <div class=\\"results\\" v-if=\\"results.length\\" @click=\\"copyResults\\">\\n      <div v-for=\\"(result, index) in results\\" :key=\\"index\\" class=\\"result-item\\">\\n        {{ result }}\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\"history-section\\" v-if=\\"drawHistory.length\\">\\n    <h3>历史记录 \\n      <button class=\\"clear-btn\\" @click=\\"clearHistory\\" style=\\"margin-left: 10px;\\">清空历史</button>\\n    </h3>\\n    <div v-for=\\"record in drawHistory\\" :key=\\"record.id\\" class=\\"history-item\\" @click=\\"copyHistory(record.winners)\\">\\n      <span class=\\"remove-btn\\" @click.stop=\\"removeHistory(record.id)\\">×</span>\\n      <p>{{ record.date }}</p>\\n      <div class=\\"participant-item\\" v-for=\\"winner in record.winners\\" :key=\\"winner\\">\\n        {{ winner }}\\n      </div>\\n    </div>\\n  </div>\\n</div>","autoDesc":true}`);export{vt as comp,mt as data};
